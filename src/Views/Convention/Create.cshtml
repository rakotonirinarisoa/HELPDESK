@model Helpdesk.Crmcli_CONVENTIONS

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/LayoutPageMasterCONV.cshtml";
}

<head>
    <style>
        /*#region CSS FOTSINY */
        .form-unique {
            width: 100%;
        }

        thead th {
            font-size: 13px;
            padding: 15px !important;
            text-align: center;
            background-color: #EC7325;
            color: white;
        }

        tr {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        td {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        #dbpa thead th {
            font-size: 13px;
            padding: 15px !important;
            text-align: center;
            background-color: #0A93AC;
            color: white;
        }

        #dbpa tr {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        #dbpa td {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        #dbpar thead th {
            font-size: 13px;
            padding: 15px !important;
            text-align: center;
            background-color: #0A93AC;
            color: white;
        }

        #dbpar tr {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        #dbpar td {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        #rfa thead th {
            font-size: 13px;
            padding: 15px !important;
            text-align: center;
            background-color: #0A93AC;
            color: white;
        }

        #rfa tr {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        #rfa td {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        #Options thead th {
            font-size: 13px;
            padding: 15px !important;
            text-align: center;
            background-color: #0fa344;
            color: white;
        }

        #Options tr {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        #Options td {
            font-size: 12px;
            padding: 15px !important;
            background-color: #242426;
            color: white;
        }

        .buttonAnnuler {
            background-color: #f00;
            border: none;
            color: white;
            padding: 5px 15px;
            text-align: center;
            font-size: 12px;
            margin: 4px 2px;
            opacity: 0.8;
            transition: 0.3s;
            display: inline-block;
            text-decoration: none;
            cursor: pointer;
        }

        .buttonAnnuler:hover {
            opacity: 1;
        }
        /*#endregion*/

        /*#region CSS ANLE SELECTION CLINENT */

        .select2-container--material {
            width: 100% !important;
            border: 3px solid #EC7325;
            height: 50px;
        }

            .select2-container--material .select2-selection--single {
                background-color: #fff;
                border-radius: 0;
                box-shadow: none;
                box-sizing: content-box;
                min-height: 10px;
                margin: 0;
                outline: none;
                padding: 8px;
                transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            }

                .select2-container--material .select2-selection--single .select2-selection__rendered {
                    color: rgba(0, 0, 0, 0.6);
                    line-height: 28px;
                    padding-left: 0;
                }

                .select2-container--material .select2-selection--single .select2-selection__clear {
                    cursor: pointer;
                    float: right;
                    font-weight: bold;
                }

                .select2-container--material .select2-selection--single .select2-selection__placeholder {
                    color: #999;
                }

                .select2-container--material .select2-selection--single .select2-selection__arrow {
                    height: 26px;
                    margin: 0.6rem 0 0.4rem 0;
                    position: absolute;
                    top: 1px;
                    right: 1px;
                    width: 20px;
                }

                    .select2-container--material .select2-selection--single .select2-selection__arrow b {
                        border-color: #888 transparent transparent transparent;
                        border-style: solid;
                        border-width: 5px 4px 0 4px;
                        height: 0;
                        left: 50%;
                        margin-left: -4px;
                        margin-top: -2px;
                        position: absolute;
                        top: 50%;
                        width: 0;
                    }

            .select2-container--material[dir="rtl"] .select2-selection--single .select2-selection__clear {
                float: left;
            }

            .select2-container--material[dir="rtl"] .select2-selection--single .select2-selection__arrow {
                left: 1px;
                right: auto;
            }

            .select2-container--material.select2-container--disabled .select2-selection--single {
                background-color: #eee;
                cursor: default;
            }

                .select2-container--material.select2-container--disabled .select2-selection--single .select2-selection__clear {
                    display: none;
                }

            .select2-container--material.select2-container--open .select2-selection--single .select2-selection__arrow b {
                border-color: transparent transparent #888 transparent;
                border-width: 0 4px 5px 4px;
            }

            .select2-container--material .select2-selection--multiple {
                background-color: transparent;
                border: none;
                border-bottom: 1px solid #ced4da;
                border-radius: 0;
                box-shadow: none;
                box-sizing: content-box;
                cursor: text;
                height: auto;
                margin: 0;
                outline: none;
                padding: 5px 0 0 0;
                transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            }

                .select2-container--material .select2-selection--multiple .select2-selection__rendered {
                    box-sizing: border-box;
                    list-style: none;
                    margin: 0;
                    padding: 0 5px;
                    width: 100%;
                }

                    .select2-container--material .select2-selection--multiple .select2-selection__rendered li {
                        list-style: none;
                    }

                .select2-container--material .select2-selection--multiple .select2-selection__placeholder {
                    color: #999;
                    margin-top: 5px;
                    float: left;
                }

                .select2-container--material .select2-selection--multiple .select2-selection__clear {
                    cursor: pointer;
                    float: right;
                    font-weight: bold;
                    margin-top: 5px;
                    margin-right: 10px;
                }

                .select2-container--material .select2-selection--multiple .select2-selection__choice {
                    background-color: #ffca28;
                    border-radius: 16px;
                    color: rgba(0, 0, 0, 0.6);
                    cursor: default;
                    float: left;
                    margin-right: 5px;
                    margin-top: 6px;
                    padding: 0 12px;
                }

                .select2-container--material .select2-selection--multiple .select2-selection__choice__remove {
                    cursor: pointer;
                    display: inline-block;
                    font-weight: bold;
                    float: right;
                    margin-left: 5px;
                }

                    .select2-container--material .select2-selection--multiple .select2-selection__choice__remove:hover {
                        color: #333;
                    }

            .select2-container--material[dir="rtl"] .select2-selection--multiple .select2-selection__choice, .select2-container--material[dir="rtl"] .select2-selection--multiple .select2-selection__placeholder, .select2-container--material[dir="rtl"] .select2-selection--multiple .select2-search--inline {
                float: right;
            }

            .select2-container--material[dir="rtl"] .select2-selection--multiple .select2-selection__choice {
                margin-left: 5px;
                margin-right: auto;
            }

            .select2-container--material[dir="rtl"] .select2-selection--multiple .select2-selection__choice__remove {
                margin-left: 2px;
                margin-right: auto;
            }

            .select2-container--material.select2-container--disabled .select2-selection--multiple {
                background-color: #eee;
                cursor: default;
            }

            .select2-container--material.select2-container--disabled .select2-selection__choice__remove {
                display: none;
            }

            .select2-container--material.select2-container--open.select2-container--above .select2-selection--single, .select2-container--material.select2-container--open.select2-container--above .select2-selection--multiple {
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }

            .select2-container--material.select2-container--open.select2-container--below .select2-selection--single, .select2-container--material.select2-container--open.select2-container--below .select2-selection--multiple {
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }

            .select2-container--material.select2-container--focus .select2-selection--single {
                transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
                outline: 0;
            }

            .select2-container--material.select2-container--focus .select2-selection--multiple {
                transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
                outline: 0;
            }

            .select2-container--material .select2-search--dropdown .select2-search__field {
                border: none;
                border-bottom: 1px solid #ced4da;
                border-radius: 0;
                outline: none;
            }

                .select2-container--material .select2-search--dropdown .select2-search__field:focus:not([readonly]) {
                    box-shadow: 0 1px 0 0 #ced4da;
                    border-bottom: 1px solid #ced4da;
                }

            .select2-container--material .select2-search--inline .select2-search__field {
                background: transparent;
                border: none !important;
                outline: 0;
                box-shadow: none !important;
                -webkit-appearance: textfield;
            }

            .select2-container--material .select2-results > .select2-results__options {
                max-height: 200px;
                overflow-y: auto;
            }

            .select2-container--material .select2-results__option[role=group] {
                padding: 0;
            }

            .select2-container--material .select2-results__option[aria-disabled=true] {
                color: #999;
            }

            .select2-container--material .select2-results__option[aria-selected=true] {
                background-color: #ddd;
            }

            .select2-container--material .select2-results__option .select2-results__option {
                padding-left: 1em;
            }

                .select2-container--material .select2-results__option .select2-results__option .select2-results__group {
                    padding-left: 0;
                }

                .select2-container--material .select2-results__option .select2-results__option .select2-results__option {
                    margin-left: -1em;
                    padding-left: 2em;
                }

                    .select2-container--material .select2-results__option .select2-results__option .select2-results__option .select2-results__option {
                        margin-left: -2em;
                        padding-left: 3em;
                    }

                        .select2-container--material .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option {
                            margin-left: -3em;
                            padding-left: 4em;
                        }

                            .select2-container--material .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option {
                                margin-left: -4em;
                                padding-left: 5em;
                            }

                                .select2-container--material .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option {
                                    margin-left: -5em;
                                    padding-left: 6em;
                                }

            .select2-container--material .select2-results__option--highlighted[aria-selected] {
                background-color: #0A93AC;
                color: white;
            }

            .select2-container--material .select2-results__group {
                cursor: default;
                display: block;
                padding: 6px;
            }

        .select2-dropdown {
            background-color: white;
            border: 1px solid #ced4da;
            border-radius: 4px;
            box-sizing: border-box;
            box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);
            display: block;
            position: absolute;
            left: -100000px;
            width: 100%;
            z-index: 1051;
            -webkit-box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);
        }

        .select2-results {
            display: block;
        }

        .select2-results__options {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .select2-results__option {
            padding: 6px;
            user-select: none;
            -webkit-user-select: none;
        }

            .select2-results__option[aria-selected] {
                cursor: pointer;
            }

        .select2-container--open .select2-dropdown {
            left: 0;
        }

        .select2-container--open .select2-dropdown--above {
            border-bottom: none;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .select2-container--open .select2-dropdown--below {
            border-top: none;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
        }

        .select2-search--dropdown {
            display: block;
            padding: 4px;
        }

            .select2-search--dropdown .select2-search__field {
                padding: 4px;
                width: 100%;
                box-sizing: border-box;
            }

                .select2-search--dropdown .select2-search__field::-webkit-search-cancel-button {
                    -webkit-appearance: none;
                }

            .select2-search--dropdown.select2-search--hide {
                display: none;
            }

        /*#endregion */
    </style>
</head>

<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />

@using (Html.BeginForm("CreateD","Convention",FormMethod.Post)) {
    
    @Html.ValidationSummary(true)

    <legend>NOUVELLE CONVENTION</legend>
    
    <fieldset>
        <div class="row">
            <div class="col-sm-4 form-group">
                <div>
                    @Html.Label("", "SAISIE PAR :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.SAISISSEUR, new{ @readonly = "readonly", @class="form-unique", @style="border: ridge #000000", @id="SAISISSEUR", @Value=@Session["NameSess"].ToString()})
                    @Html.ValidationMessageFor(model => model.SAISISSEUR)
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "DATE DE LA SAISIE DE LA NOUVELLE CONVENTION :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.DATESAISIE, new{ @readonly = "readonly", @class="form-unique", @style="border: ridge #0fa344", @id="DATESAISIE", @Value=DateTime.Now.ToShortDateString()})
                    @Html.ValidationMessageFor(model => model.DATESAISIE)
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "ETAT DE LA CONVENTION :")
                </div>
                <div>
                    @Html.DropDownListFor(model => model.EtatCollection, new SelectList(Model.EtatCollection), "", new { @class = "form-unique", @style="border: ridge #000000", @id="ETAT"})
                    @Html.ValidationMessageFor(model => model.ETAT)
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 form-group">
                <div>
                    @Html.Label("", "REFERENCE DE LA CONVENTION :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.REFERENCE, new{ @readonly = "readonly", @class="form-unique", @style="border: ridge #000000", @id="REFERENCE", @Value=@ViewData["REFCONVENTION"].ToString()})
                    @Html.ValidationMessageFor(model => model.REFERENCE)
                </div>
            </div>
            <div class="col-sm-6 form-group">
                <div class="editor-label">
                    @Html.Label("", "CLIENT :")
                </div>
                <div>
                    @Html.DropDownListFor(model => model.CLIENT, (SelectList)ViewBag.ClientsList, "", new { @class="form-unique", @style="border: ridge #EC7325", @id="CLIENT"})
                    @Html.ValidationMessageFor(model => model.CLIENT)
                </div>
            </div>
            <div class="col-sm-2 form-group">
                <div class="editor-label">
                    @Html.Label("", "DATE ENVOI CONVENTION :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.DATEENVOI, new { type = "date", @class = "form-unique", @style="border: ridge #0fa344", @id="DATEENVOI"})
                    @Html.ValidationMessageFor(model => model.DATEENVOI)
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "INTITULE DU PROJET")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.INTITULE, new{ @class="form-unique", @Value = "", @style="border: ridge #000000", @id="INTITULE"})
                    @Html.ValidationMessageFor(model => model.INTITULE)
                </div>
            </div>
            <div class="col-sm-6 form-group">
                <div class="editor-label">
                    @Html.Label("", "DESCRIPTION DU PROJET")
                </div>
                <div>
                    @Html.TextAreaFor(model => model.DESCRIPTION, new{ @class="form-unique", @style="border: ridge #000000", @id="DESCRIPTION"})
                    @Html.ValidationMessageFor(model => model.DESCRIPTION)
                </div>
            </div>
            <div class="col-sm-2 form-group">
                <div class="editor-label">
                    @Html.Label("", "COMMERCIAUX EN CHARGE")
                </div>
                <div>
                    @Html.TextAreaFor(model => model.COMMERCIALE, new{ @class="form-unique", @style="border: ridge #000000", @id="COMMERCIALE"})
                    @Html.ValidationMessageFor(model => model.COMMERCIALE)
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "INTERCOLUTEUR")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.NOMCONTACT, new{ @class="form-unique", @Value = "", @style="border: ridge #EC7325", @id="NOMCONTACT"})
                    @Html.ValidationMessageFor(model => model.NOMCONTACT)
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "MAIL (INTERLOCUTEUR)")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.MAILCONTACT, new{ @class="form-unique", @Value = "", @style="border: ridge #EC7325", @id="MAILCONTACT"})
                    @Html.ValidationMessageFor(model => model.MAILCONTACT)
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "TEL (INTERLOCUTEUR)")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.NUMCONTACT, new{ @class="form-unique", @Value = "", @style="border: ridge #EC7325", @id="NUMCONTACT"})
                    @Html.ValidationMessageFor(model => model.NUMCONTACT)
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "DATE PHASE 1 :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.DATEPHASE1, new { type = "date", @class = "form-unique", @style="border: ridge #0fa344", @id="DATEPHASE1"})
                    @Html.ValidationMessageFor(model => model.DATEPHASE1)
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "DATE PHASE 2 :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.DATEPHASE2, new { type = "date", @class = "form-unique", @style="border: ridge #0fa344", @id="DATEPHASE2"})
                    @Html.ValidationMessageFor(model => model.DATEPHASE2)
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "DATE PHASE 3 :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.DATEPHASE3, new { type = "date", @class = "form-unique", @style="border: ridge #0fa344", @id="DATEPHASE3"})
                    @Html.ValidationMessageFor(model => model.DATEPHASE3)
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "DATE PHASE 4 :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.DATEPHASE4, new { type = "date", @class = "form-unique", @style="border: ridge #0fa344", @id="DATEPHASE4"})
                    @Html.ValidationMessageFor(model => model.DATEPHASE4)
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "DATE PHASE 5 :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.DATEPHASE5, new { type = "date", @class = "form-unique", @style="border: ridge #0fa344", @id="DATEPHASE5"})
                    @Html.ValidationMessageFor(model => model.DATEPHASE5)
                </div>
            </div>
            <div class="col-sm-4 form-group">
                <div class="editor-label">
                    @Html.Label("", "DATE PHASE 6 :")
                </div>
                <div>
                    @Html.TextBoxFor(model => model.DATEPHASE6, new { type = "date", @class = "form-unique", @style="border: ridge #0fa344", @id="DATEPHASE6"})
                    @Html.ValidationMessageFor(model => model.DATEPHASE6)
                </div>
            </div>
        </div>
    </fieldset>
    <div class="col-lg-12">
        &nbsp
    </div>

    <div class="row">
        <div class="col-sm-12 form-group">
            <input type="button" name="ValidationDem" value="Enregistrer" class="form-unique", style="background-color: #BD0F0F; border: 1px solid #BD0F0F;" onclick="validation()"/>
        </div>
    </div>

}
<script src="~/Content/Chosen/chosen.jquery.min.js"></script>
<script src="~/Content/Chosen/init.js"></script>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#CLIENT').select2({ theme: "material" });
        });

        function validation() {
            var collection =
            {
                SAISISSEUR: $("#SAISISSEUR").val(),
                DATESAISIE: $("#DATESAISIE").val(),
                ETAT: $("#ETAT").val(),
                REFERENCE: $("#REFERENCE").val(),
                CLIENT: $("#CLIENT").val(),
                DATEENVOI: $("#DATEENVOI").val(),
                INTITULE: $("#INTITULE").val(),
                DESCRIPTION: $("#DESCRIPTION").val(),
                NOMCONTACT: $("#NOMCONTACT").val(),
                MAILCONTACT: $("#MAILCONTACT").val(),
                NUMCONTACT: $("#NUMCONTACT").val(),
                DATEPHASE1: $("#DATEPHASE1").val(),
                DATEPHASE2: $("#DATEPHASE2").val(),
                DATEPHASE3: $("#DATEPHASE3").val(),
                DATEPHASE4: $("#DATEPHASE4").val(),
                DATEPHASE5: $("#DATEPHASE5").val(),
                DATEPHASE6: $("#DATEPHASE6").val(),
                COMMERCIALE: $("#COMMERCIALE").val()
            };
            $.ajax({
                type: "POST",
                url: '@Url.Action("CreateD", "Convention")',
                dataType: "json",
                contentType: 'application/json; charset=utf-8',
                data:
                    JSON.stringify({
                        collection: collection
                    }),
                cache: false,
                processData: false,

                success: function (result) {
                    alert(result);
                    window.location.href = "@Url.Action("Index", "Convention")";
                },
                error: function (args) {
                    alert(args.responseText);
                }
            });
        }
    </script>
}
